os: linux
dist: trusty
cache: false
sudo: required
language: bash
services: docker

branches:
  only:
  - master

addons:
  apt:
    packages:
    - sshpass

script:
- set -e
- bash ./ci/build_docker_image.sh
- 
  if [ "$TRAVIS_PULL_REQUEST" = "false" ];
    bash ./ci/push_image_to_dockerhub.sh;
    bash ./ci/deploy.sh;
  fi